"use strict";(self.webpackChunkduroom_docs=self.webpackChunkduroom_docs||[]).push([[1744],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=p(n),c=a,h=m["".concat(l,".").concat(c)]||m[c]||d[c]||r;return n?o.createElement(h,i(i({ref:t},u),{},{components:n})):o.createElement(h,i({ref:t},u))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5901:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return c},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return d}});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),i=["components"],s={},l="Getting Started",p={unversionedId:"extend/start",id:"extend/start",title:"Getting Started",description:"Want to build a DuRoom extension? You've come to the right place! This document will take you through some essential concepts, after which you'll build your first DuRoom extension from scratch.",source:"@site/docs/extend/start.md",sourceDirName:"extend",slug:"/extend/start",permalink:"/vi/extend/start",draft:!1,editUrl:"https://github.com/DuRoom/docs/tree/master/docs/extend/start.md",tags:[],version:"current",frontMatter:{},sidebar:"extendSidebar",previous:{title:"M\u1edf r\u1ed9ng DuRoom",permalink:"/vi/extend"},next:{title:"Frontend Development",permalink:"/vi/extend/frontend"}},u={},d=[{value:"Architecture",id:"architecture",level:2},{value:"Extenders",id:"extenders",level:2},{value:"Hello World",id:"hello-world",level:2},{value:"Extension Packaging",id:"extension-packaging",level:2},{value:"extend.php",id:"extendphp",level:3},{value:"composer.json",id:"composerjson",level:3},{value:"Installing Your Extension",id:"installing-your-extension",level:3}],m={toc:d};function c(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"Want to build a DuRoom extension? You've come to the right place! This document will take you through some essential concepts, after which you'll build your first DuRoom extension from scratch."),(0,r.kt)("h2",{id:"architecture"},"Architecture"),(0,r.kt)("p",null,"In order to understand how to extend DuRoom, first we need to understand a bit about how DuRoom is built."),(0,r.kt)("p",null,"Be aware that DuRoom uses some ",(0,r.kt)("em",{parentName:"p"},"modern")," languages and tools. If you've only ever built WordPress plugins before, you might feel a bit out of your depth! That's OK \u2014 this is a great time to learn cool new things and extend your skillset. However, we would advise that you become somewhat familiar with the technologies described below before proceeding."),(0,r.kt)("p",null,"DuRoom is made up of three layers:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"First, there is the ",(0,r.kt)("strong",{parentName:"p"},"backend"),". This is written in ",(0,r.kt)("a",{parentName:"p",href:"https://laracasts.com/series/object-oriented-bootcamp-in-php"},"object-oriented PHP"),", and makes use of a wide array of ",(0,r.kt)("a",{parentName:"p",href:"https://laravel.com/"},"Laravel")," components and other packages via ",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/"},"Composer"),". You'll also want to familiarize yourself with the concept of ",(0,r.kt)("a",{parentName:"p",href:"https://laravel.com/docs/8.x/container"},"Dependency Injection"),", which is used throughout our backend.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Second, the backend exposes a ",(0,r.kt)("strong",{parentName:"p"},"public API")," which allows frontend clients to interface with your forum's data. This is built according to the ",(0,r.kt)("a",{parentName:"p",href:"https://jsonapi.org/"},"JSON:API specification"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Finally, there is the default web interface which we call the ",(0,r.kt)("strong",{parentName:"p"},"frontend"),". This is a ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Single-page_application"},"single-page application")," which consumes the API. It's built with a simple React-like framework called ",(0,r.kt)("a",{parentName:"p",href:"https://mithril.js.org"},"Mithril.js"),"."))),(0,r.kt)("p",null,"Extensions will often need to interact with all three of these layers to make things happen. For example, if you wanted to build an extension that adds custom fields to user profiles, you would need to add the appropriate database structures in the ",(0,r.kt)("strong",{parentName:"p"},"backend"),", expose that data in the ",(0,r.kt)("strong",{parentName:"p"},"public API"),", and then display it and allow users to edit it on the ",(0,r.kt)("strong",{parentName:"p"},"frontend"),"."),(0,r.kt)("p",null,"So... how do we extend these layers?"),(0,r.kt)("h2",{id:"extenders"},"Extenders"),(0,r.kt)("p",null,"In order to extend DuRoom, we will be using a concept called ",(0,r.kt)("strong",{parentName:"p"},"extenders"),". Extenders are ",(0,r.kt)("em",{parentName:"p"},"declarative")," objects that describe in plain terms the goals you are trying to achieve (such as adding a new route to your forum, or executing some code when a new discussion was created)."),(0,r.kt)("p",null,"Every extender is different. However, they will always look somewhat similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"// Register a JavaScript and a CSS file to be delivered with the forum frontend\n(new Extend\\Frontend('forum'))\n    ->js(__DIR__.'/forum-scripts.js')\n    ->css(__DIR__.'/forum-styles.css')\n")),(0,r.kt)("p",null,"You first create an instance of the extender, and then call methods on it for further configuration. All of these methods return the extender itself, so that you can achieve your entire configuration just by chaining method calls."),(0,r.kt)("p",null,"To keep things consistent, we use this concept of extenders in both the backend (in PHP land) and the frontend (in JavaScript land). ",(0,r.kt)("em",{parentName:"p"},"Everything")," you do in your extension should be done via extenders, because they are a ",(0,r.kt)("strong",{parentName:"p"},"guarantee")," we are giving to you that a future minor release of DuRoom won't break your extension."),(0,r.kt)("p",null,"All of the extenders currently available to you from DuRoom's core can be found in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/DuRoom/framework/blob/main/framework/core/src/Extend"},(0,r.kt)("inlineCode",{parentName:"a"},"Extend")," namespace")," ",(0,r.kt)("a",{parentName:"p",href:"https://api.duroom.js.org/docs/php/master/duroom/extend"},"(PHP API documentation)")," Extensions may also offer their ",(0,r.kt)("a",{parentName:"p",href:"/vi/extend/extensibility#custom-extenders"},"own extenders"),"."),(0,r.kt)("h2",{id:"hello-world"},"Hello World"),(0,r.kt)("p",null,"Want to see an extender in action? The ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.php")," file in the root of your DuRoom installation is the easiest way to register extenders just for your site. It should return an array of extender objects. Pop it open and add the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"<?php\n\nuse DuRoom\\Extend;\nuse DuRoom\\Frontend\\Document;\n\nreturn [\n    (new Extend\\Frontend('forum'))\n        ->content(function (Document $document) {\n            $document->head[] = '<script>alert(\"Hello, world!\")<\/script>';\n        })\n];\n")),(0,r.kt)("p",null,"Now pay your forum a visit for a pleasant (albeit extremely obtrusive) greeting. \ud83d\udc4b"),(0,r.kt)("p",null,"For simple site-specific customizations \u2013\xa0like adding a bit of custom CSS/JavaScript, or integrating with your site's authentication system \u2013 the ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.php")," file in your forum's root is great. But at some point, your customization might outgrow it. Or maybe you have wanted to build an extension to share with the community from the get-go. Time to build an extension!"),(0,r.kt)("h2",{id:"extension-packaging"},"Extension Packaging"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org"},"Composer")," is a dependency manager for PHP. It allows applications to easily pull in external code libraries and makes it easy to keep them up-to-date so that security and bug fixes are propagated rapidly."),(0,r.kt)("p",null,'As it turns out, every DuRoom extension is also a Composer package. That means someone\'s DuRoom installation can "require" a certain extension and Composer will pull it in and keep it up-to-date. Nice!'),(0,r.kt)("p",null,"During development, you can work on your extensions locally and set up a ",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/doc/05-repositories.md#path"},"Composer path repository")," to install your local copy. Create a new ",(0,r.kt)("inlineCode",{parentName:"p"},"packages")," folder in the root of your DuRoom installation, and then run this command to tell Composer that it can find packages in here:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'composer config repositories.0 path "packages/*"\n')),(0,r.kt)("p",null,"Now let's start building our first extension. Make a new folder inside ",(0,r.kt)("inlineCode",{parentName:"p"},"packages")," for your extension called ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world"),". We'll put two files in it: ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.php")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"composer.json"),". These files serve as the heart and soul of the extension."),(0,r.kt)("h3",{id:"extendphp"},"extend.php"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.php")," file is just like the one in the root of your site. It will return an array of extender objects that tell DuRoom what you want to do. For now, just move over the ",(0,r.kt)("inlineCode",{parentName:"p"},"Frontend")," extender that you had earlier."),(0,r.kt)("h3",{id:"composerjson"},"composer.json"),(0,r.kt)("p",null,"We need to tell Composer a bit about our package, and we can do this by creating a ",(0,r.kt)("inlineCode",{parentName:"p"},"composer.json")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "acme/duroom-hello-world",\n    "description": "Say hello to the world!",\n    "type": "duroom-extension",\n    "require": {\n        "duroom/core": "^1.0.0"\n    },\n    "autoload": {\n        "psr-4": {"Acme\\\\HelloWorld\\\\": "src/"}\n    },\n    "extra": {\n        "duroom-extension": {\n            "title": "Hello World",\n            "icon": {\n                "name": "fas fa-smile",\n                "backgroundColor": "#238c59",\n                "color": "#fff"\n            }\n        }\n    }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"name")," is the name of the Composer package in the format ",(0,r.kt)("inlineCode",{parentName:"p"},"vendor/package"),"."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You should choose a vendor name that\u2019s unique to you \u2014 your GitHub username, for example. For the purposes of this tutorial, we\u2019ll assume you\u2019re using ",(0,r.kt)("inlineCode",{parentName:"li"},"acme")," as your vendor name."),(0,r.kt)("li",{parentName:"ul"},"You should prefix the ",(0,r.kt)("inlineCode",{parentName:"li"},"package")," part with ",(0,r.kt)("inlineCode",{parentName:"li"},"duroom-")," to indicate that it\u2019s a package specifically intended for use with DuRoom."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"description")," is a short one-sentence description of what the extension does.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"type")," MUST be set to ",(0,r.kt)("inlineCode",{parentName:"p"},"duroom-extension"),'. This ensures that when someone "requires" your extension, it will be identified as such.')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"require")," contains a list of your extension's own dependencies."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You'll want to specify the version of DuRoom that your extension is compatible with here."),(0,r.kt)("li",{parentName:"ul"},"This is also the place to list other Composer libraries your code needs to work."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"autoload")," tells Composer where to find your extension's classes. The namespace in here should reflect your extensions' vendor and package name in CamelCase.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"extra.duroom-extension")," contains some DuRoom-specific information, like your extension's display name and how its icon should look."),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"title")," is the display name of your extension."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"icon")," is an object which defines your extension's icon. The ",(0,r.kt)("strong",{parentName:"li"},"name")," property is a ",(0,r.kt)("a",{parentName:"li",href:"https://fontawesome.com/icons"},"Font Awesome icon class name"),". All other properties are used as the ",(0,r.kt)("inlineCode",{parentName:"li"},"style")," attribute for your extension's icon.")))),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/doc/04-schema.md"},"the composer.json schema")," documentation for information about other properties you can add to ",(0,r.kt)("inlineCode",{parentName:"p"},"composer.json"),"."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),(0,r.kt)("a",{parentName:"h5",href:"https://github.com/DuRoom/cli"},"DuRoom CLI"))),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Use the CLI to automatically create your extension's scaffolding:"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ duroom-cli init\n")))),(0,r.kt)("h3",{id:"installing-your-extension"},"Installing Your Extension"),(0,r.kt)("p",null,"The final thing we need to do to get up and running is to install your extension. Navigate to the root directory of your DuRoom install and run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"composer require acme/duroom-hello-world *@dev\n")),(0,r.kt)("p",null,"Once that's done, go ahead and fire 'er up on your forum's Administration page, then navigate back to your forum."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"whizzing, whirring, metal clunking")),(0,r.kt)("p",null,"Woop! Hello to you too, extension!"),(0,r.kt)("p",null,"We're making good progress. We've learned how to set up our extension and use extenders, which opens up a lot of doors. Read on to learn how to extend DuRoom's frontend."))}c.isMDXComponent=!0}}]);