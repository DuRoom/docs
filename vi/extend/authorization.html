<!doctype html>
<html lang="vi" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-extend/authorization">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<title data-rh="true">Authorization | DuRoom Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://duroom.github.io/docs/vi/extend/authorization"><meta data-rh="true" name="docusaurus_locale" content="vi"><meta data-rh="true" name="docsearch:language" content="vi"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Authorization | DuRoom Documentation"><meta data-rh="true" name="description" content="As with any framework, DuRoom allows certain actions and content to be restricted to certain users. There are 2 parallel systems for this:"><meta data-rh="true" property="og:description" content="As with any framework, DuRoom allows certain actions and content to be restricted to certain users. There are 2 parallel systems for this:"><link data-rh="true" rel="icon" href="/docs/vi/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://duroom.github.io/docs/vi/extend/authorization"><link data-rh="true" rel="alternate" href="https://duroom.github.io/docs/extend/authorization" hreflang="en"><link data-rh="true" rel="alternate" href="https://duroom.github.io/docs/vi/extend/authorization" hreflang="vi"><link data-rh="true" rel="alternate" href="https://duroom.github.io/docs/extend/authorization" hreflang="x-default"><link rel="stylesheet" href="/docs/vi/assets/css/styles.8f7f784a.css">
<link rel="preload" href="/docs/vi/assets/js/runtime~main.00a7501a.js" as="script">
<link rel="preload" href="/docs/vi/assets/js/main.ed54e0bb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Nhảy tới nội dung</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/vi/"><div class="navbar__logo"><img src="/docs/vi/img/logo-docs.svg" alt="DuRoom Docs Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/vi/img/logo-docs.svg" alt="DuRoom Docs Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/vi/">Hướng dẫn</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/vi/extend">Mở rộng</a><a class="navbar__item navbar__link" href="/docs/vi/internal">Nội bộ</a><a href="https://api.duroom.js.org/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Tham chiếu API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">DuRoom</a><ul class="dropdown__menu"><li><a href="https://duroom.js.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Trang chủ<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://discuss-duroom.js.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Cộng đồng<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/DuRoom/core/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Tiếng Việt</a><ul class="dropdown__menu"><li><a href="/docs/extend/authorization" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/docs/vi/extend/authorization" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">Tiếng Việt</a></li></ul></div><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-label="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Trở lại đầu trang" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Khái niệm chính</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend">Mở rộng DuRoom</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/start">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/frontend">Frontend Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/routes">Routes and Content</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/models">Models and Migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/api">API and Data Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/distribution">Distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/cli">DuRoom CLI</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Hướng dẫn Tham khảo</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/admin">Admin Dashboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/backend-events">Backend Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/vi/extend/authorization">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/frontend-pages">Frontend Pages and Resolvers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/interactive-components">Interactive Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/i18n">Internationalization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/language-packs">Translating DuRoom</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/forms">Forms and Requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/permissions">Groups and Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/settings">Settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/theme">Themes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/views">Views and Blade</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Hướng dẫn nâng cao</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/api-throttling">API Throttling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/assets">Extension Assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/console">Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/extending-extensions">Extending Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/extensibility">Extensibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/filesystem">Filesystem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/formatting">Formatting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/mail">Mail Drivers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/middleware">Middleware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/model-visibility">Model Visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/slugging">Model Slugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/notifications">Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/post-types">Post Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/search">Searching and Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/vi/extend/service-provider">Service Provider</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>Bản dịch của trang này có thể không được cập nhật, vui lòng tham khảo <b><a target="_self" href="/docs/extend/authorization">phiên bản ngôn ngữ mặc định</a></b> để biết thông tin mới nhất. Nếu bạn muốn đóng góp, chúng tôi đang phối hợp dịch <b><a href="https://crowdin.com/project/duroom-docs" target="_blank" rel="noopener noreferrer">thông qua Crowdin</a></b>.</div></div><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/vi/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Hướng dẫn Tham khảo</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Authorization</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">Trên trang này</button></div><div class="theme-doc-markdown markdown"><h1>Authorization</h1><p>As with any framework, DuRoom allows certain actions and content to be restricted to certain users. There are 2 parallel systems for this:</p><ul><li>The authorization process dictates whether a user can take a certain action.</li><li>Visibility scoping can be applied to a database query to efficiently restrict the records that users can access. This is documented in our <a href="/docs/vi/extend/model-visibility">model visibility</a> article.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="authorization-process">Authorization Process<a class="hash-link" href="#authorization-process" title="Đường dẫn trực tiếp tới đề mục này">​</a></h2><p>The authorization process is used to check whether a person is allowed to perform certain actions. For instance, we want to check if a user is authorized before they:</p><ul><li>Access the admin dashboard</li><li>Start a discussion</li><li>Edit a post</li><li>Update another user&#x27;s profile</li></ul><p>Each of these is determined by unique criteria: in some cases a flag is sufficient; otherwise, we might need custom logic.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-it-works">How It Works<a class="hash-link" href="#how-it-works" title="Đường dẫn trực tiếp tới đề mục này">​</a></h2><p>Authorization queries are made with 3 parameters, with logic contained in <a href="https://api.duroom.js.org/docs/php/master/duroom/user/access/gate" target="_blank" rel="noopener noreferrer"><code>DuRoom\User\Gate</code></a>:</p><ol><li>The actor: the user attempting to perform the action</li><li>The ability: a string representing the action the actor is attempting</li><li>The arguments: usually an instance of a database model which is the subject of the attempted ability, but could be anything.</li></ol><p>First, we run the entire request (all three parameters) through all <a href="#policies">policies</a> registered by extensions and core. Policies are blocks of logic provided by core and extensions that determine whether the actor can perform the ability on the arguments. Policies can return one of the following:</p><ul><li><code>DuRoom\User\Access\AbstractPolicy::ALLOW</code> (via <code>$this-&gt;allow()</code>)</li><li><code>DuRoom\User\Access\AbstractPolicy::DENY</code> (via <code>$this-&gt;deny()</code>)</li><li><code>DuRoom\User\Access\AbstractPolicy::FORCE_ALLOW</code> (via <code>$this-&gt;forceAllow()</code>)</li><li><code>DuRoom\User\Access\AbstractPolicy::FORCE_DENY</code> (via <code>$this-&gt;forceDeny()</code>)</li></ul><p>Policy results are considered in the priority <code>FORCE_DENY</code> &gt; <code>FORCE_ALLOW</code> &gt; <code>DENY</code> &gt; <code>ALLOW</code>. For example, if a single policy returns <code>FORCE_DENY</code>, all other policies will be ignored. If one policy returns <code>DENY</code> and 10 policies return <code>ALLOW</code>, the request will be denied. This allows decisions to be made regardless of the order in which extensions are booted. Note that policies are extremely powerful: if access is denied at the policy stage, that will override group permissions and even admin privileges.</p><p>Secondly, if all policies return null (or don&#x27;t return anything), we check if the user is in a group that has a permission equal to the ability (note that both permissions and abilities are represented as strings). If so, we authorize the action.
See our <a href="/docs/vi/extend/permissions">Groups and Permissions documentation</a> for more information on permissions.</p><p>Then, if the user is in the admin group, we will authorize the action.</p><p>Finally, as we have exhausted all checks, we will assume that the user is unauthorized and deny the request.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-to-use-authorization">How To Use Authorization<a class="hash-link" href="#how-to-use-authorization" title="Đường dẫn trực tiếp tới đề mục này">​</a></h2><p>DuRoom&#x27;s authorization system is accessible through public methods of the <code>DuRoom\User\User</code> class. The most important ones are listed below; others are documented in our <a href="https://api.duroom.js.org/docs/php/master/duroom/user/user" target="_blank" rel="noopener noreferrer">PHP API documentation</a>.</p><p>In this example, we will use <code>$actor</code> as an instance of <code>DuRoom\User\User</code>, <code>&#x27;viewForum&#x27;</code> and <code>&#x27;reply&#x27;</code> as examples of abilities, and <code>$discussion</code> (instance of <code>DuRoom\Discussion\Discussion</code>) as an example argument.</p><div class="language-php codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-php codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Check whether a user can perform an action.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$canDoSomething</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">can</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;viewForum&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Check whether a user can perform an action on a subject.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$canDoSomething</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">can</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;reply&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$discussion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Raise a PermissionDeniedException if a user cannot perform an action.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">assertCan</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;viewForum&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">assertCan</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;reply&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$discussion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Raise a NotAuthenticatedException if the user is not logged in.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">assertRegistered</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Raise a PermissionDeniedException if the user is not an admin.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">assertAdmin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Check whether one of the user&#x27;s groups have a permission.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// WARNING: this should be used with caution, as it doesn&#x27;t actually</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// run through the authorization process, so it doesn&#x27;t account for policies.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// It is, however, useful in implementing custom policies.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actorHasPermission</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">hasPermission</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string backtick-quoted-string" style="color:rgb(255, 121, 198)">`viewForum`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="custom-policies">Custom Policies<a class="hash-link" href="#custom-policies" title="Đường dẫn trực tiếp tới đề mục này">​</a></h2><p>Policies allow us to use custom logic beyond simple groups and permissions when evaluating authorization for an ability with a subject. For instance:</p><ul><li>We want to allow users to edit posts even if they aren&#x27;t moderators, but only their own posts.</li><li>Depending on settings, we might allow users to rename their own discussions indefinitely, for a short period of time after posting, or not at all.</li></ul><p>As described <a href="#how-it-works">above</a>, on any authorization check, we query all policies registered for the target&#x27;s model, or any parent classes of the target&#x27;s model.
If no target is provided, any policies registered as <code>global</code> will be applied.</p><p>So, how does a policy get &quot;checked&quot;?</p><p>First, we check if the policy class has a method with the same name as the ability being evaluated.
If so, we run it with the actor and subject as parameters.
If that method returns a non-null value, we return that result. Otherwise, we continue to the next step (not necessarily the next policy).</p><p>Then, we check if the policy class has a method called <code>can</code>. If so, we run it with the actor, ability, and subject, and return the result.</p><p>If <code>can</code> doesn&#x27;t exist or returns null, we are done with this policy, and we proceed to the next one.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span><a href="https://github.com/DuRoom/cli" target="_blank" rel="noopener noreferrer">DuRoom CLI</a></h5></div><div class="admonition-content"><p>You can use the CLI to automatically generate policies:</p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ duroom-cli </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> backend policy</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="example-policies">Example Policies<a class="hash-link" href="#example-policies" title="Đường dẫn trực tiếp tới đề mục này">​</a></h3><p>Let&#x27;s take a look at an example policy from <a href="https://github.com/DuRoom/tags/blob/master/src/Access" target="_blank" rel="noopener noreferrer">DuRoom Tags</a>:</p><div class="language-php codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-php codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token php language-php delimiter important">&lt;?php</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">namespace</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Tags</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Access</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Tags</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Tag</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">User</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Access</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">AbstractPolicy</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">User</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">User</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token php language-php"> </span><span class="token php language-php class-name-definition class-name">TagPolicy</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">extends</span><span class="token php language-php"> </span><span class="token php language-php class-name">AbstractPolicy</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @param User $actor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @param Tag $tag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @return bool|null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     */</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:rgb(80, 250, 123)">startDiscussion</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php class-name type-declaration">User</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php class-name type-declaration">Tag</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$tag</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$tag</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php property">is_restricted</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">            </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">hasPermission</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;tag&#x27;</span><span class="token php language-php operator">.</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$tag</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php property">id</span><span class="token php language-php operator">.</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;.startDiscussion&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php operator">?</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">allow</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">deny</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @param User $actor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @param Tag $tag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @return bool|null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     */</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:rgb(80, 250, 123)">addToDiscussion</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php class-name type-declaration">User</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php class-name type-declaration">Tag</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$tag</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">startDiscussion</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$tag</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can also have global policies, which are run when <code>$user-&gt;can()</code> is called without a target model instance. Again from Tags:</p><div class="language-php codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-php codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token php language-php delimiter important">&lt;?php</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">namespace</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Tags</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Access</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Settings</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">SettingsRepositoryInterface</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Tags</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Tag</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">User</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">Access</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">AbstractPolicy</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token php language-php"> </span><span class="token php language-php package">DuRoom</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">User</span><span class="token php language-php package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token php language-php package">User</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token php language-php"> </span><span class="token php language-php class-name-definition class-name">GlobalPolicy</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">extends</span><span class="token php language-php"> </span><span class="token php language-php class-name">AbstractPolicy</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @var SettingsRepositoryInterface</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     */</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">protected</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$settings</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:rgb(80, 250, 123)">__construct</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php class-name type-declaration">SettingsRepositoryInterface</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$settings</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php property">settings</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$settings</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @param DuRoom\User\User $actor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @param string $ability</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     * @return bool|void</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php comment" style="color:rgb(98, 114, 164)">     */</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:rgb(80, 250, 123)">can</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php class-name type-declaration">User</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php keyword type-hint" style="color:rgb(189, 147, 249);font-style:italic">string</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ability</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">in_array</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ability</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;viewForum&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;startDiscussion&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">            </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$enoughPrimary</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">count</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php class-name static-context">Tag</span><span class="token php language-php operator">::</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">getIdsWhereCan</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ability</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php constant boolean" style="color:rgb(189, 147, 249)">true</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php constant boolean" style="color:rgb(189, 147, 249)">false</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php operator">&gt;=</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php property">settings</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">get</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;min_primary_tags&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">            </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$enoughSecondary</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">count</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php class-name static-context">Tag</span><span class="token php language-php operator">::</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">getIdsWhereCan</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$actor</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ability</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php constant boolean" style="color:rgb(189, 147, 249)">false</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php constant boolean" style="color:rgb(189, 147, 249)">true</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php operator">&gt;=</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php property">settings</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">get</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;min_secondary_tags&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">            </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$enoughPrimary</span><span class="token php language-php"> </span><span class="token php language-php operator">&amp;&amp;</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$enoughSecondary</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">                </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">allow</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">            </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token php language-php"> </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">                </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$this</span><span class="token php language-php operator">-&gt;</span><span class="token php language-php function" style="color:rgb(80, 250, 123)">deny</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">            </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="registering-policies">Registering Policies<a class="hash-link" href="#registering-policies" title="Đường dẫn trực tiếp tới đề mục này">​</a></h3><p>Both model-based and global policies can be registered with the <code>Policy</code> extender in your <code>extend.php</code> file:</p><div class="language-php codeBlockContainer_MPoW theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-php codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token package">DuRoom</span><span class="token package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token package">Extend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token package">DuRoom</span><span class="token package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token package">Tags</span><span class="token package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token package">Tag</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain"> </span><span class="token package">YourNamespace</span><span class="token package punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token package">Access</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Other extenders</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified">Extend</span><span class="token class-name class-name-fully-qualified punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token class-name class-name-fully-qualified">Policy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">modelPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name static-context">Tag</span><span class="token operator">::</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context">Access</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token class-name class-name-fully-qualified static-context">TagPolicy</span><span class="token operator">::</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-&gt;</span><span class="token function" style="color:rgb(80, 250, 123)">globalPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token class-name class-name-fully-qualified static-context">Access</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token class-name class-name-fully-qualified static-context">GlobalPolicy</span><span class="token operator">::</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Other extenders</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Sao chép code vào bộ nhớ tạm" title="Sao chép" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="frontend-authorization">Frontend Authorization<a class="hash-link" href="#frontend-authorization" title="Đường dẫn trực tiếp tới đề mục này">​</a></h2><p>Commonly, you&#x27;ll want to use authorization results in frontend logic.
For example, if a user doesn&#x27;t have permission to see search users, we shouldn&#x27;t send requests to that endpoint.
And if a user doesn&#x27;t have permission to edit users, we shouldn&#x27;t show menu items for that.</p><p>Because we can&#x27;t do authorization checks in the frontend, we have to perform them in the backend, and attach them to serialization of data we&#x27;re sending.
Global permissions (<code>viewForum</code>, <code>viewUserList</code>) can be included on the <code>ForumSerializer</code>, but for object-specific authorization, we may want to include those with the subject object.
For instance, when we return lists of discussions, we check whether the user can reply, rename, edit, and delete them, and store that data on the frontend discussion model.
It&#x27;s then accessible via <code>discussion.canReply()</code> or <code>discussion.canEdit()</code>, but there&#x27;s nothing magic there: it&#x27;s just another attribute sent by the serializer.</p><p>For an example of how to attach data to a serializer, see a <a href="/docs/vi/extend/settings#accessing-settings">similar case for transmitting settings</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/DuRoom/docs/tree/master/docs/extend/authorization.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Sửa trang này</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Thanh điều hướng của trang tài liệu"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/vi/extend/backend-events"><div class="pagination-nav__sublabel">Trước</div><div class="pagination-nav__label">Backend Events</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/vi/extend/frontend-pages"><div class="pagination-nav__sublabel">Kế tiếp</div><div class="pagination-nav__label">Frontend Pages and Resolvers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#authorization-process" class="table-of-contents__link toc-highlight">Authorization Process</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#how-to-use-authorization" class="table-of-contents__link toc-highlight">How To Use Authorization</a></li><li><a href="#custom-policies" class="table-of-contents__link toc-highlight">Custom Policies</a><ul><li><a href="#example-policies" class="table-of-contents__link toc-highlight">Example Policies</a></li><li><a href="#registering-policies" class="table-of-contents__link toc-highlight">Registering Policies</a></li></ul></li><li><a href="#frontend-authorization" class="table-of-contents__link toc-highlight">Frontend Authorization</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Bản quyền © 2022 NKDuy. Được xây dựng bằng Docusaurus.</div></div></div></footer></div>
<script src="/docs/vi/assets/js/runtime~main.00a7501a.js"></script>
<script src="/docs/vi/assets/js/main.ed54e0bb.js"></script>
</body>
</html>